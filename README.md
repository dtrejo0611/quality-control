# Visual Inspection GUI (PyQt5 + OpenCV)

This project is a small visual-inspection application built with PyQt5 and OpenCV. It provides a GUI to capture or load images, select Regions of Interest (ROIs) for two types of tests (color matching and template/presence matching), and run a simple pass/fail test that highlights results on the test image.

## Overview

The application mixes a graphical user interface created with PyQt5 and image-processing logic using OpenCV (cv2). It supports:

- Reading from a connected USB camera or loading images from files (simulator mode).
- Interactive ROI selection on images (click and drag).
- Color-based detection using HSV ranges extracted from a saved ROI.
- Template/presence detection using matchTemplate + non-maximum suppression to count matches.
- A simple combined test that returns PASS/FAIL based on configured thresholds.

## Features

- Simulator mode to load images from disk.
- Live capture mode using connected cameras.
- ROI drawing via the custom `MyLabel` widget (click & drag).
- Save ROI and color information for color-test.
- Save ROI and expected count for presence-test.
- Visual feedback on the test image (green overlay for matched color pixels and rectangles for found templates).
- Results summary with percentages and PASS/FAIL indicator.

## Repository structure

- main.py
  - Main application entry point. Sets up the GUI, connects UI signals to handlers, loads images, and orchestrates tests.
- interfazB.py
  - PyQt5 UI definition (generated by pyuic5). Uses `MyLabel` for interactive ROIs.
- labels.py
  - Contains the `MyLabel` class (subclass of QLabel) to draw and obtain rectangle coordinates from user mouse interaction.
- visionLib.py
  - Image-processing utilities:
    - Camera enumeration and capture
    - Image conversion
    - Color extraction and testing
    - Template/presence matching
- nonMaximanSuppression.py
  - Non-maximum suppression implementation (Malisiewicz et al.) used to reduce overlapping matches produced by template matching.
- mTk.py
  - Small wrapper using tkinter to open a file selection dialog for selecting images in simulator or test loading.

## Requirements

- Python 3.8+ (tested with recent 3.x)
- PyQt5
- OpenCV (opencv-python)
- numpy
- tkinter (usually included with standard Python installs; used only for file dialogs)
